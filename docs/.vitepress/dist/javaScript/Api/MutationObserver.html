<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MutationObserver | Yannick</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.1.4">
    <link rel="preload stylesheet" href="/yannick-docs/assets/style.DSDDEH6S.css" as="style">
    <script type="module" src="/yannick-docs/assets/chunks/metadata.b9b61c20.js"></script>
    <script type="module" src="/yannick-docs/assets/app.CKaLn45j.js"></script>
    <link rel="preload" href="/yannick-docs/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/yannick-docs/assets/chunks/theme.BXFhHe8s.js">
    <link rel="modulepreload" href="/yannick-docs/assets/chunks/framework.BDfjdzks.js">
    <link rel="modulepreload" href="/yannick-docs/assets/javaScript_Api_MutationObserver.md.BFh8nAX7.lean.js">
    <link rel="icon" href="/docs/morty.jpg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="Layout" data-v-8fe48570><!--[--><!--]--><!--[--><span tabindex="-1" data-v-e7be80ac></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-e7be80ac> Skip to content </a><!--]--><!----><header class="VPNav" data-v-8fe48570 data-v-a594baad><div class="VPNavBar has-sidebar top" data-v-a594baad data-v-acb76c4c><div class="wrapper" data-v-acb76c4c><div class="container" data-v-acb76c4c><div class="title" data-v-acb76c4c><div class="VPNavBarTitle has-sidebar" data-v-acb76c4c data-v-28ac5b24><a class="title" href="/yannick-docs/" data-v-28ac5b24><!--[--><!--]--><!--[--><img class="VPImage logo" src="/yannick-docs/morty.jpg" alt data-v-71c7d9a6><!--]--><span data-v-28ac5b24>Yannick</span><!--[--><!--]--></a></div></div><div class="content" data-v-acb76c4c><div class="content-body" data-v-acb76c4c><!--[--><!--]--><div class="VPNavBarSearch search" data-v-acb76c4c><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-acb76c4c data-v-13f38e04><span id="main-nav-aria-label" class="visually-hidden" data-v-13f38e04>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-13f38e04 data-v-1eb3b83e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1eb3b83e><span class="text" data-v-1eb3b83e><!----><span data-v-1eb3b83e>基础</span><span class="vpi-chevron-down text-icon" data-v-1eb3b83e></span></span></button><div class="menu" data-v-1eb3b83e><div class="VPMenu" data-v-1eb3b83e data-v-27466a62><div class="items" data-v-27466a62><!--[--><!--[--><div class="VPMenuLink" data-v-27466a62 data-v-a52f2759><a class="VPLink link" href="/yannick-docs/css/css%E5%B8%83%E5%B1%80/grid%E5%B8%83%E5%B1%80.html" data-v-a52f2759><!--[-->css<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-27466a62 data-v-a52f2759><a class="VPLink link" href="/yannick-docs/javaScript/Api/IntersectionObserver.html" data-v-a52f2759><!--[-->javaScript<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-27466a62 data-v-a52f2759><a class="VPLink link" href="/yannick-docs/typeScript/type/typeScript%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B.html" data-v-a52f2759><!--[-->typeScript<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-27466a62 data-v-a52f2759><a class="VPLink link" href="/yannick-docs/git/git.html" data-v-a52f2759><!--[-->git<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-13f38e04 data-v-1eb3b83e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1eb3b83e><span class="text" data-v-1eb3b83e><!----><span data-v-1eb3b83e>框架</span><span class="vpi-chevron-down text-icon" data-v-1eb3b83e></span></span></button><div class="menu" data-v-1eb3b83e><div class="VPMenu" data-v-1eb3b83e data-v-27466a62><div class="items" data-v-27466a62><!--[--><!--[--><div class="VPMenuLink" data-v-27466a62 data-v-a52f2759><a class="VPLink link" href="/yannick-docs/vue/vite/vite%E9%A1%B9%E7%9B%AE.html" data-v-a52f2759><!--[-->vue<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-27466a62 data-v-a52f2759><a class="VPLink link" href="/yannick-docs/react/index.html" data-v-a52f2759><!--[-->react<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-13f38e04 data-v-1eb3b83e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1eb3b83e><span class="text" data-v-1eb3b83e><!----><span data-v-1eb3b83e>其他</span><span class="vpi-chevron-down text-icon" data-v-1eb3b83e></span></span></button><div class="menu" data-v-1eb3b83e><div class="VPMenu" data-v-1eb3b83e data-v-27466a62><div class="items" data-v-27466a62><!--[--><!--[--><div class="VPMenuGroup" data-v-27466a62 data-v-3517e1e8><p class="title" data-v-3517e1e8>杂项</p><!--[--><!--[--><div class="VPMenuLink" data-v-3517e1e8 data-v-a52f2759><a class="VPLink link" href="/yannick-docs/webNav/official-website.html" data-v-a52f2759><!--[-->导航<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-3517e1e8 data-v-a52f2759><a class="VPLink link" href="/yannick-docs/plugins/sortable.html" data-v-a52f2759><!--[-->插件<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-3517e1e8 data-v-a52f2759><a class="VPLink link" href="/yannick-docs/jottings/code-snippets/javaScript.html" data-v-a52f2759><!--[-->记录<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-acb76c4c data-v-b48c7e9f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-b48c7e9f data-v-cc4e5e84 data-v-1182aafa><span class="check" data-v-1182aafa><span class="icon" data-v-1182aafa><!--[--><span class="vpi-sun sun" data-v-cc4e5e84></span><span class="vpi-moon moon" data-v-cc4e5e84></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-acb76c4c data-v-43f71eea data-v-1eb3b83e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-1eb3b83e><span class="vpi-more-horizontal icon" data-v-1eb3b83e></span></button><div class="menu" data-v-1eb3b83e><div class="VPMenu" data-v-1eb3b83e data-v-27466a62><!----><!--[--><!--[--><!----><div class="group" data-v-43f71eea><div class="item appearance" data-v-43f71eea><p class="label" data-v-43f71eea>Appearance</p><div class="appearance-action" data-v-43f71eea><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-43f71eea data-v-cc4e5e84 data-v-1182aafa><span class="check" data-v-1182aafa><span class="icon" data-v-1182aafa><!--[--><span class="vpi-sun sun" data-v-cc4e5e84></span><span class="vpi-moon moon" data-v-cc4e5e84></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-acb76c4c data-v-3e422426><span class="container" data-v-3e422426><span class="top" data-v-3e422426></span><span class="middle" data-v-3e422426></span><span class="bottom" data-v-3e422426></span></span></button></div></div></div></div><div class="divider" data-v-acb76c4c><div class="divider-line" data-v-acb76c4c></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-8fe48570 data-v-c8fea90e><div class="container" data-v-c8fea90e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-c8fea90e><span class="vpi-align-left menu-icon" data-v-c8fea90e></span><span class="menu-text" data-v-c8fea90e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-c8fea90e data-v-1273f2fc><button data-v-1273f2fc>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-8fe48570 data-v-3aad7d78><div class="curtain" data-v-3aad7d78></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-3aad7d78><span class="visually-hidden" id="sidebar-aria-label" data-v-3aad7d78> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-3aad7d78><section class="VPSidebarItem level-0 collapsible has-active" data-v-3aad7d78 data-v-72536950><div class="item" role="button" tabindex="0" data-v-72536950><div class="indicator" data-v-72536950></div><h2 class="text" data-v-72536950>Api</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-72536950><span class="vpi-chevron-right caret-icon" data-v-72536950></span></div></div><div class="items" data-v-72536950><!--[--><div class="VPSidebarItem level-1 is-link" data-v-72536950 data-v-72536950><div class="item" data-v-72536950><div class="indicator" data-v-72536950></div><a class="VPLink link link" href="/yannick-docs/javaScript/Api/IntersectionObserver.html" data-v-72536950><!--[--><p class="text" data-v-72536950>IntersectionObserver</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-72536950 data-v-72536950><div class="item" data-v-72536950><div class="indicator" data-v-72536950></div><a class="VPLink link link" href="/yannick-docs/javaScript/Api/ResizeObserver.html" data-v-72536950><!--[--><p class="text" data-v-72536950>ResizeObserver</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-72536950 data-v-72536950><div class="item" data-v-72536950><div class="indicator" data-v-72536950></div><a class="VPLink link link" href="/yannick-docs/javaScript/Api/MutationObserver.html" data-v-72536950><!--[--><p class="text" data-v-72536950>MutationObserver</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-3aad7d78><section class="VPSidebarItem level-0 collapsible" data-v-3aad7d78 data-v-72536950><div class="item" role="button" tabindex="0" data-v-72536950><div class="indicator" data-v-72536950></div><h2 class="text" data-v-72536950>视窗尺寸位置</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-72536950><span class="vpi-chevron-right caret-icon" data-v-72536950></span></div></div><div class="items" data-v-72536950><!--[--><div class="VPSidebarItem level-1 is-link" data-v-72536950 data-v-72536950><div class="item" data-v-72536950><div class="indicator" data-v-72536950></div><a class="VPLink link link" href="/yannick-docs/javaScript/sizePosition/window%E8%A7%86%E5%9B%BE.html" data-v-72536950><!--[--><p class="text" data-v-72536950>window视图</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-72536950 data-v-72536950><div class="item" data-v-72536950><div class="indicator" data-v-72536950></div><a class="VPLink link link" href="/yannick-docs/javaScript/sizePosition/element%E5%85%83%E7%B4%A0%E8%A7%86%E5%9B%BE.html" data-v-72536950><!--[--><p class="text" data-v-72536950>element元素视图</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-72536950 data-v-72536950><div class="item" data-v-72536950><div class="indicator" data-v-72536950></div><a class="VPLink link link" href="/yannick-docs/javaScript/sizePosition/%E9%BC%A0%E6%A0%87%E4%BD%8D%E7%BD%AE.html" data-v-72536950><!--[--><p class="text" data-v-72536950>鼠标位置</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-3aad7d78><section class="VPSidebarItem level-0 collapsible" data-v-3aad7d78 data-v-72536950><div class="item" role="button" tabindex="0" data-v-72536950><div class="indicator" data-v-72536950></div><h2 class="text" data-v-72536950>事件</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-72536950><span class="vpi-chevron-right caret-icon" data-v-72536950></span></div></div><div class="items" data-v-72536950><!--[--><div class="VPSidebarItem level-1 is-link" data-v-72536950 data-v-72536950><div class="item" data-v-72536950><div class="indicator" data-v-72536950></div><a class="VPLink link link" href="/yannick-docs/javaScript/event/%E6%8B%96%E6%8B%BD%E4%BA%8B%E4%BB%B6.html" data-v-72536950><!--[--><p class="text" data-v-72536950>拖拽</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-3aad7d78><section class="VPSidebarItem level-0 collapsible" data-v-3aad7d78 data-v-72536950><div class="item" role="button" tabindex="0" data-v-72536950><div class="indicator" data-v-72536950></div><h2 class="text" data-v-72536950>其他</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-72536950><span class="vpi-chevron-right caret-icon" data-v-72536950></span></div></div><div class="items" data-v-72536950><!--[--><div class="VPSidebarItem level-1 is-link" data-v-72536950 data-v-72536950><div class="item" data-v-72536950><div class="indicator" data-v-72536950></div><a class="VPLink link link" href="/yannick-docs/javaScript/other/iterator-generator.html" data-v-72536950><!--[--><p class="text" data-v-72536950>迭代器和生成器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-72536950 data-v-72536950><div class="item" data-v-72536950><div class="indicator" data-v-72536950></div><a class="VPLink link link" href="/yannick-docs/javaScript/other/js%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84.html" data-v-72536950><!--[--><p class="text" data-v-72536950>js树形结构</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-8fe48570 data-v-4a8b9783><div class="VPDoc has-sidebar has-aside" data-v-4a8b9783 data-v-fc43c3e2><!--[--><!--]--><div class="container" data-v-fc43c3e2><div class="aside" data-v-fc43c3e2><div class="aside-curtain" data-v-fc43c3e2></div><div class="aside-container" data-v-fc43c3e2><div class="aside-content" data-v-fc43c3e2><div class="VPDocAside" data-v-fc43c3e2 data-v-5902b08a><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" role="navigation" data-v-5902b08a data-v-dacb1493><div class="content" data-v-dacb1493><div class="outline-marker" data-v-dacb1493></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-dacb1493>On this page</div><ul class="VPDocOutlineItem root" data-v-dacb1493 data-v-d57a1205><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-5902b08a></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-fc43c3e2><div class="content-container" data-v-fc43c3e2><!--[--><!--]--><main class="main" data-v-fc43c3e2><div style="position:relative;" class="vp-doc _yannick-docs_javaScript_Api_MutationObserver" data-v-fc43c3e2><div><h1 id="mutationobserver" tabindex="-1"><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver" target="_blank" rel="noreferrer">MutationObserver</a> <a class="header-anchor" href="#mutationobserver" aria-label="Permalink to &quot;[MutationObserver](https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver)&quot;">​</a></h1><blockquote><p><code>MutationObserver</code> 接口提供了监视对 DOM 树所做更改的能力</p></blockquote><h2 id="_1-mutationobserver构造函数" tabindex="-1">1. MutationObserver构造函数 <a class="header-anchor" href="#_1-mutationobserver构造函数" aria-label="Permalink to &quot;1. MutationObserver构造函数&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">警告</p><p>创建并返回一个新的观察器，它会在触发指定 <code>DOM</code> 事件时，调用指定的回调函数。<code>MutationObserver</code> 对 <code>DOM</code> 的观察不会立即启动；而必须先调用 <code>observe()</code> 方法来确定，要监听哪一部分的 <code>DOM</code> 以及要响应哪些更改。</p></div><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> observer</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> MutationObserver</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_1-1-mutationobserver构造函数参数" tabindex="-1">1.1 MutationObserver构造函数参数 <a class="header-anchor" href="#_1-1-mutationobserver构造函数参数" aria-label="Permalink to &quot;1.1 MutationObserver构造函数参数&quot;">​</a></h3><p><code>callback(mutationList, observer)</code> :<br> 一个回调函数，每当被<strong>指定的节点或子树以及配置项</strong>有 <code>DOM</code> 变动时会被调用。<br></p><p>两个参数：<br></p><ul><li><p><code>mutationList</code>:描述所有被触发改动的 <code>MutationRecord</code> 对象数组.<br></p></li><li><p><code>observer</code> : 调用该函数的 <code>MutationObserver</code> 对象(构造函数的实例对象)</p></li></ul><h2 id="_2-mutationobserver实例" tabindex="-1">2.MutationObserver实例 <a class="header-anchor" href="#_2-mutationobserver实例" aria-label="Permalink to &quot;2.MutationObserver实例&quot;">​</a></h2><blockquote><p>一个可以监听目标元素触发指定<code>DOM</code>事件的新的<code>MutationObserver</code> 实例。调用自身的observe() 方法开始监听指定目标。</p></blockquote><p><strong>实例方法:</strong><br></p><p><b style="color:red;">1. observe(target[, options])</b></p><p><strong>参数:</strong><br> 1. <code>target</code>: <code>DOM</code> 树中的一个要观察变化的 <code>DOM</code> <code>Node</code> (可能是一个 <code>Element</code>)，或者是被观察的子节点树的根节点 2. <code>options</code>: 此对象的配置项描述了 <code>DOM</code> 的哪些变化应该报告给 <code>MutationObserver</code> 的 <code>callback</code>。</p><p><code>options</code> 的属性如下：</p><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td><strong>subtree(可选)</strong></td><td>当为 true 时，将会监听以 target 为根节点的整个子树。包括子树中所有节点的属性，而不仅仅是针对 target。默认值为 false。</td></tr><tr><td><strong>childList(可选)</strong></td><td>当为 true 时，监听 target 节点中发生的节点的新增与删除（同时，如果 subtree 为 true，会针对整个子树生效）。默认值为 false。</td></tr><tr><td><strong>attributes(可选)</strong></td><td>当为 true 时观察所有监听的节点属性值的变化。默认值为 true，当声明了 attributeFilter 或 attributeOldValue，默认值则为 false。</td></tr><tr><td><strong>attributeFilter(可选)</strong></td><td>一个用于声明哪些属性名会被监听的数组。如果不声明该属性，所有属性的变化都将触发通知。</td></tr><tr><td><strong>attributeOldValue(可选)</strong></td><td>当为 true 时，记录上一次被监听的节点的属性变化；可查阅监听属性值了解关于观察属性变化和属性值记录的详情。默认值为 false。</td></tr><tr><td><strong>characterData(可选)</strong></td><td>当为 true 时，监听声明的 target 节点上所有字符的变化。默认值为 true，如果声明了 characterDataOldValue，默认值则为 false</td></tr><tr><td><strong>characterDataOldValue(可选)</strong></td><td>当为 true 时，记录前一个被监听的节点中发生的文本变化。默认值为 false</td></tr></tbody></table><div class="danger custom-block"><p class="custom-block-title">注意</p><p>当调用 <code>observe()</code> 时，<code>childList</code>、<code>attributes</code> 和 <code>characterData</code> 中，必须有一个参数为 <code>true</code>。否则会抛出 <code>TypeError</code> 异常。</p></div><p><b style="color:red;">2. disconnect()</b></p><blockquote><p>告诉观察者停止观察变动</p></blockquote><p><b style="color:red;">3. takeRecords()</b></p><blockquote><p>返回已检测到但尚未由观察者的回调函数处理的所有匹配 DOM 更改的列表，使变更队列保持为空。此方法最常见的使用场景是在断开观察者之前立即获取所有未处理的更改记录，以便在停止观察者时可以处理任何未处理的更改。</p></blockquote><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> targetNode</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;#someElement&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> observerOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  childList</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  attributes</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> observer</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> MutationObserver</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">observer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">observe</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">targetNode</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">observerOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">/* 准备停止监听器 此时抓取未处理的变更记录传递给回调继续执行完成 */</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> mutations</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> observer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">takeRecords</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">mutations</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  callback</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">mutations</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">/**确保变更记录全部处理完成了 取消监听 */</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">observer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">disconnect</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>代码中第 12-18 行抓取了所有未处理的变更记录，然后调用回调，并将变更记录列表传递给回调，以保证所有变更记录都被处理。这是在调用 <code>disconnect()</code> 之前完成的，以便停止观察 DOM。</p></div><h2 id="_3-mutationrecord对象" tabindex="-1">3.MutationRecord对象 <a class="header-anchor" href="#_3-mutationrecord对象" aria-label="Permalink to &quot;3.MutationRecord对象&quot;">​</a></h2><blockquote><p>每个 <code>MutationRecord</code> 都代表一个独立的 <code>DOM</code> 变化，在每次随 <code>DOM</code> 变化调用 <code>MutationObserver</code>构造函数的回调函数时，一个相应的 <code>MutationRecord</code> 会被作为参数，传递给回调函数(<code>callback</code>中的<code>mutationList</code>参数)。</p></blockquote><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td><code>type</code></td><td>如果是属性变化，则返回 &quot;attributes&quot;； 如果是 <code>characterData</code> 节点变化，则返回 &quot;characterData&quot;； 如果是子节点树 <code>childList</code> 变化，则返回 &quot;childList&quot;</td></tr><tr><td><code>target</code></td><td>根据 <code>type</code>，返回变化所影响的节点。 对于属性 <code>attributes</code> 变化，返回属性变化的节点。 对于 <code>characterData</code> 变化，返回 <code>characterData</code> 节点。 对于子节点树 <code>childList</code> 变化，返回子节点变化的节点</td></tr><tr><td><code>addedNodes</code></td><td>返回被添加的节点。 如果没有节点被添加，则该属性将是一个空的 <code>NodeList</code>。</td></tr><tr><td><code>removedNodes</code></td><td>返回被移除的节点。 如果没有节点被移除，则该属性将是一个空的 <code>NodeList</code>。</td></tr><tr><td><code>previousSibling</code></td><td>返回被添加或移除的节点之前的兄弟节点，或者 <code>null</code>。</td></tr><tr><td><code>nextSibling</code></td><td>返回被添加或移除的节点之后的兄弟节点，或者 <code>null</code>。</td></tr><tr><td><code>attributeName</code></td><td>返回被修改的属性的属性名，或者 <code>null</code>。</td></tr><tr><td><code>attributeNamespace</code></td><td>返回被修改属性的命名空间，或者 <code>null</code>。</td></tr><tr><td><code>oldValue</code></td><td>返回值取决于<code>type</code> 。 对于属性 <code>attributes</code> 变化，返回变化之前的属性值。 对于 <code>characterData</code> 变化，返回变化之前的数据。 对于子节点树 <code>childList</code> 变化，返回 <code>null</code>。<strong>注意，如果要让这个属性起作用，在相应的 实例调用 observe 方法式的options配置对象中，attributeOldValue 或者 characterDataOldValue 必须设置为 true。</strong></td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title"><a href="https://vueuse.org/core/useMutationObserver/#usemutationobserver" target="_blank" rel="noreferrer">useMutationObserver</a></p><p>vue中的hooks库VueUse对<code>MutationObserver</code>进行了封装,vue项目可使用<a href="https://vueuse.org/core/useMutationObserver/#usemutationobserver" target="_blank" rel="noreferrer">useMutationObserver</a></p></div></div></div></main><footer class="VPDocFooter" data-v-fc43c3e2 data-v-cac11402><!--[--><!--]--><div class="edit-info" data-v-cac11402><div class="edit-link" data-v-cac11402><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://gitee.com/z-k-p/docs/tree/master/packages/docs/guide/javaScript/Api/MutationObserver.md" target="_blank" rel="noreferrer" data-v-cac11402><!--[--><span class="vpi-square-pen edit-link-icon" data-v-cac11402></span> 在gitee上编辑<!--]--></a></div><div class="last-updated" data-v-cac11402><p class="VPLastUpdated" data-v-cac11402 data-v-620f11b3>上次更新: <time datetime="2024-06-24T13:43:54.000Z" data-v-620f11b3></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-cac11402><span class="visually-hidden" id="doc-footer-aria-label" data-v-cac11402>Pager</span><div class="pager" data-v-cac11402><a class="VPLink link pager-link prev" href="/yannick-docs/javaScript/Api/ResizeObserver.html" data-v-cac11402><!--[--><span class="desc" data-v-cac11402>Previous page</span><span class="title" data-v-cac11402>ResizeObserver</span><!--]--></a></div><div class="pager" data-v-cac11402><a class="VPLink link pager-link next" href="/yannick-docs/javaScript/sizePosition/window%E8%A7%86%E5%9B%BE.html" data-v-cac11402><!--[--><span class="desc" data-v-cac11402>Next page</span><span class="title" data-v-cac11402>window视图</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-8fe48570 data-v-a76c9c92><div class="container" data-v-a76c9c92><p class="message" data-v-a76c9c92>Life is fxxking movie...</p><p class="copyright" data-v-a76c9c92>Copyright © 2024-present Yannick</p></div></footer><!--[--><!--]--></div><!----><!----><!--]--></div>
    
    
  </body>
</html>